
<%- include('partials/header.ejs', {title:"Profile", style: "profile"}) %>
<div class="container">
  <div class="profile-container">
    <h1>Welcome, <%= user.username %>!</h1>

    <!-- Profile Information -->
    <div class="profile-section">
      <h2>Profile Information</h2>
      <form class="profile-form" action="/profile" method="POST">
        <input type="hidden" name="_csrf" value="<%= locals.csrfToken %>">
        <div class="form-group">
          <label for="fullName">Full Name:</label>
          <input
            type="text"
            id="fullName"
            name="fullName"
            value="<%= user.fullName %>"
            required
          />
        </div>

        <div class="form-group">
          <label for="avatarUrl">Avatar URL:</label>
          <input
            type="text"
            id="avatarUrl"
            name="avatarUrl"
            value="<%= user.avatarUrl %>"
          />
        </div>

        <div class="form-group">
          <label for="bio">Bio:</label>
          <textarea
            id="bio"
            name="bio"
            rows="4"
          ><%= user.bio %></textarea>
        </div>

        <div class="form-group">
          <label for="location">Location:</label>
          <input
            type="text"
            id="location"
            name="location"
            value="<%= user.location %>"
          />
        </div>

        <div class="form-group">
          <label for="website">Website:</label>
          <input
            type="text"
            id="website"
            name="website"
            value="<%= user.website %>"
          />
        </div>

        <div class="form-group">
          <button type="submit" class="submit-btn">Update Profile</button>
        </div>
      </form>
    </div>

    <!-- Change Password Section -->
    <div class="profile-section">
      <h2>Change Password</h2>
      <form class="profile-form" action="/profile/change-password" method="POST">
        <div class="form-group">
          <label for="currentPassword">Current Password:</label>
          <input
            type="password"
            id="currentPassword"
            name="currentPassword"
            required
          />
        </div>

        <div class="form-group">
          <label for="newPassword">New Password:</label>
          <input
            type="password"
            id="newPassword"
            name="newPassword"
            required
          />
        </div>

        <div class="form-group">
          <label for="confirmPassword">Confirm New Password:</label>
          <input
            type="password"
            id="confirmPassword"
            name="confirmPassword"
            required
          />
        </div>

        <div class="form-group">
          <button type="submit" class="submit-btn">Change Password</button>
        </div>
      </form>
    </div>

    <!-- Display Error Messages -->
    <% if (messages.error) { %>
      <div class="error-message">
        <%= messages.error %>
      </div>
    <% } %>

    <!-- Display Success Messages -->
    <% if (messages.success) { %>
      <div class="success-message">
        <%= messages.success %>
      </div>
    <% } %>
  </div>
</div>
<%- include('partials/footer.ejs') %>
